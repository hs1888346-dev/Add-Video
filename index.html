<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-auth.js"></script>

</head>
<body>

<button id="loginBtn">Login with Google</button>

<script>
// ----------------------------
var firebaseConfig = {
  apiKey: "AIzaSyCh3l_nm0h0rftal0-NZH0Nl5Vuf0MU_gM",
  authDomain: "noteapp-1ad69.firebaseapp.com",
  projectId: "noteapp-1ad69",
};
// ----------------------------

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const provider = new firebase.auth.GoogleAuthProvider();

// ---- this is the REAL fix ----
auth.useDeviceLanguage();

document.getElementById("loginBtn").onclick = () => {
  
  auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL)
  .then(()=>{ 
      return auth.signInWithPopup(provider)
  })
  .then(result=>{
     alert("Login success "+result.user.displayName);
  })
  .catch(error=>{
     alert(error.message);
  })

}
</script>

</body>
</html>
